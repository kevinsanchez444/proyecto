<!-- Botón para volver -->
<div class="mt-3 ms-3">
<a [routerLink]="['/principal']" class="btn btn-outline-dark">
    <i class="bi bi-arrow-left"></i> Volver a Principal
</a>
</div>

<div class="container mt-4">
<h3 class="mb-3">Historial de Pedidos</h3>

  <div *ngFor="let pedido of pedidos" class="card mb-3">
    <div class="card-body">
    <h5 class="card-title">Pedido #{{ pedido.idPedidos }}</h5>
    <p class="card-text">Fecha: {{ pedido.fechaPedido | date:'short' }}</p>
    <p>Total: ${{ pedido.total }}</p>
    <button class="btn btn-outline-info" (click)="verDetalles(pedido.idPedidos)" data-bs-toggle="modal" data-bs-target="#detalleModal">
        Ver Detalles
    </button>
    </div>
</div>
</div>

<!-- Modal de Detalles del Pedido -->
<div class="modal fade" id="detalleModal" tabindex="-1" aria-labelledby="detalleModalLabel" aria-hidden="true">
<div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
    <div class="modal-header bg-primary text-white">
        <h5 class="modal-title" id="detalleModalLabel">Detalle del Pedido</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
    </div>
    
      <div class="modal-body" *ngIf="pedidoSeleccionado">
        <p><strong>Pedido ID:</strong> {{ pedidoSeleccionado.idPedidos }}</p>
        <p><strong>Fecha:</strong> {{ pedidoSeleccionado.fechaPedido | date:'short' }}</p>
        <p><strong>Dirección:</strong> {{ pedidoSeleccionado.direccion }}</p>
        <p><strong>Ciudad:</strong> {{ pedidoSeleccionado.ciudad }}</p>
        <p><strong>Referencia:</strong> {{ pedidoSeleccionado.referencia }}</p>
        <p><strong>Estado:</strong> {{ pedidoSeleccionado.estado }}</p>
        <p><strong>Total:</strong> ${{ pedidoSeleccionado.total }}</p>

        <div *ngIf="pedidoSeleccionado.estado === 'Pendiente'" class="text-end">
        <button class="btn btn-danger mt-2" (click)="cancelarPedido(pedidoSeleccionado.idPedidos)">Cancelar Pedido</button>
        </div>
    </div>

    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
    </div>
    </div>
</div>
</div>

